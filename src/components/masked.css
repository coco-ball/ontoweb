/* src/components/masked.css */

.masked-root {
  display: flex;
  flex-direction: column;
  gap: 12px;

  width: 100%;
  height: 100%;
  flex: 1 1 auto;
}

/* 토글 버튼들 */
.masked-toolbar {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin: 0 auto;
  position: relative;
  bottom: 100px;
  z-index: 20;
}

.masked-toggle {
  padding: 6px 12px;
  border-radius: 999px;
  border: 1px solid #d0d0d0;
  background: #f5f5f5;
  font-size: 12px;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    sans-serif;
  cursor: pointer;
  transition: background 0.15s ease, color 0.15s ease, border-color 0.15s ease;
}

.masked-toggle.is-active {
  background: #000;
  color: #fff;
  border-color: #000;
}

/* 메인 스테이지 공통 */
.masked-stage {
  position: relative;
  flex: 1 1 auto;
  width: 100%;
  height: 100%;
  border-radius: 24px;
  overflow: hidden;
  background: #ffffff;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.3s ease;
  isolation: isolate;
}

/* 모드별 베이스 배경 느낌 */
.mode-default {
  background: #ffffff;
}

.mode-background {
  background: #000000;
}

.mode-dinoMask {
  background: rgba(255, 255, 255, 0.5); /* 살짝 투명한 흰색 */
  backdrop-filter: blur(20px) saturate(1.2);
  -webkit-backdrop-filter: blur(30px) saturate(1.2);
}

.mode-transparent {
  background: transparent;
}

/* 공통 비디오 스타일 */
.masked-video {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 0;
}

/* 4. Feather 모드 – 가장자리 feathered 마스크 */
.masked-video--feather {
  -webkit-mask-image: radial-gradient(
    circle at center,
    rgba(0, 0, 0, 1) 55%,
    rgba(0, 0, 0, 0) 100%
  );
  mask-image: radial-gradient(
    circle at center,
    rgba(0, 0, 0, 1) 55%,
    rgba(0, 0, 0, 0) 100%
  );
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
}

/* 3. Dino Mask 모드 – 브라키오사우르스 모양으로 land.mp4가 보이게 */
.masked-dino-wrapper {
  position: relative;
  z-index: 2;
  width: 100%;
  max-width: 1280px;
}

.masked-video--dino {
  -webkit-mask-image: url("../assets/brachiosaurus.gif");
  mask-image: url("../assets/brachiosaurus.gif");
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
  -webkit-mask-size: contain;
  mask-size: contain;
  z-index: 20;
}

/* 캡션 텍스트 안에 비디오 */
.masked-video--caption {
  position: absolute;
  z-index: 3; /* 브라키오 비디오보다 위 */
  top: 58%; /* 캡션 세로 위치 – 필요하면 15~25% 사이로 조절 */
  left: 50%;
  transform: translate(-50%, -50%);
  width: calc(100% - 140px);
  -webkit-mask-image: url("../assets/caption-mask.png");
  mask-image: url("../assets/caption-mask.png");
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center top; /* 캡션 위치에 맞게 조정 */
  mask-position: center top;
  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-mode: luminance;
  mask-mode: luminance;
}

/* 캡션 텍스트는 DINO_MASK에선 눈에 안 보이게 (마스크 비디오가 대신 역할) */
.mode-dinoMask .masked-caption {
  opacity: 0;
}

.masked-video--dino,
.masked-video--caption {
  filter: drop-shadow(0 0 10px rgba(0, 0, 0, 0.25));
}

/* 1, 2에서 쓰는 원래 GIF */
.brachio-gif {
  position: relative;
  z-index: 2;
  width: 100%;
  max-width: 1280px;
  height: auto;
  display: block;
}

/* 4. Feather 모드에서 흰색 실루엣 브라키오사우르스 */
.brachio-silhouette {
  position: relative;
  z-index: 3;
  width: 100%;
  max-width: 1280px;
  height: 0;
  padding-bottom: 65%; /* 대략적인 비율 – 필요하면 조절 */
  background: #ffffff;

  -webkit-mask-image: url("../assets/brachiosaurus.gif");
  mask-image: url("../assets/brachiosaurus.gif");
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
  -webkit-mask-size: contain;
  mask-size: contain;
}

/* 캡션 텍스트 */
.masked-caption {
  position: absolute;
  top: 23%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: calc(100% - 64px);
  text-align: center;
  font-size: 90px;
  line-height: 1.05;
  margin: 0;
  font-family: "ABC Arizona Flare", system-ui, -apple-system, BlinkMacSystemFont,
    "Segoe UI", sans-serif;
  z-index: 0;
  text-transform: uppercase;
  pointer-events: none;
}

/* 모드별 텍스트 컬러 */
.mode-default .masked-caption,
.mode-dinoMask .masked-caption {
  color: #000000;
}

.mode-background .masked-caption,
.mode-transparent .masked-caption {
  color: #ffffff;
  /* text-shadow: 0 0 8px rgba(0, 0, 0, 0.6); */
}
